!function(e){function n(e,n,t){var o;try{var i=a.toLocaleLowerCase();if(null!=i&&-1!=i.indexOf("jdapp"))o=-1!=i.indexOf("jdapp;android;")?i.substring(i.indexOf("jdapp;android;")+14,i.indexOf("jdapp;android;")+19).split("."):i.substring(i.indexOf("jdapp;iphone;")+13,i.indexOf("jdapp;iphone;")+18).split(".");else{if(null==i||-1==i.indexOf("jdjr"))return!1;o=i.substring(i.indexOf("version=")+8,i.indexOf("version=")+13).split(".")}if(!o||3!==o.length)return!1;if(1*(e+""+n+t)>(1*o.join("")||-1))return!1}catch(e){return!1}return!0}!function(e,n){"function"==typeof define&&define.amd?define(function(){return e.jsBridgeV3=n(e)}):"undefined"!=typeof module&&module.exports?module.exports=n(e):e.jsBridgeV3=n(e)}("undefined"!=typeof window?window:this,function(e){function n(){this.tasks=[],this.state="pending",this.data=null}n.prototype={constructor:n,resolve:function(e){this.state="resolved",e&&(this.data=e);for(var n=0,t=this.tasks,a=t.length;n<a;n++)t[n].call(this.data,this.data),t.shift()},then:function(e){return"function"==typeof e&&(this.tasks.push(e),"resolved"===this.state&&this.resolve()),this}};var t=null,a=e.navigator.userAgent,o=/(iPhone|iPad|iPod)/i;return o.test(a)||(e.goToGetres=function(e){t(e)}),function(){function i(e){return"string"==typeof e&&(e=e.replace(/\"/g,"'")),e}function s(e){var n="";if(e instanceof Array){for(var t=0,a=e.length;t<a;t++)n+='"'+e[t]+'",';return n.substring(0,n.length-1)}}function r(e){var n="{";for(key in e)"object"==typeof e[key]?e[key]instanceof Array?n+='"'+key+'":['+s(e[key])+"],":n+='"'+key+'":'+r(e[key])+",":n+='"'+key+'":"'+i(e[key])+'",';return n=n.substring(0,n.length-1),n+="}"}function c(n){o.test(a)?d&&d(n):"object"==typeof n?e.jd.closeAndWebView(r(n)):e.jd.closeWebView(n)}var d=null,p=null,f=null,u=null,l=null,y={appId:"",img:"http://m.jr.jd.com/statics/logo.jpg",link:"http://jr.jd.com/",desc:"最具全面的理财软件",title:"欢迎使用京东金融app",friendesc:"欢迎使用京东金融app",btnTextS:"分享",btnTextJ:"跳转",btnTextN:"金融"};return{onReady:function(i){var s=new n,r=this,c=function(e){d=function(n){e.callHandler("closeWebView",n,function(e){})},iosWebExtend=function(n){e.callHandler("closeWebViewExtend",n,function(e){})},p=function(n){e.callHandler("sendWeiXinCot",n,function(e){})},f=function(n){e.callHandler("goToComment",n,function(e){})},u=function(n){e.callHandler("getResponse",n,function(e){})},iosJDPaySDK=function(n){e.callHandler("JDPaySDK",n,function(e){})},l=function(n){e.callHandler("sendRecord",n,function(e){})},o.test(a)&&e.init(function(e,n){t(e)}),i&&"function"==typeof i&&i.call(r,r),s.resolve(r)};return e.WebViewJavascriptBridge?c(WebViewJavascriptBridge):e.document.attachEvent?c(WebViewJavascriptBridge):(e.document.addEventListener("WebViewJavascriptBridgeReady",function(){c(WebViewJavascriptBridge)},!1),o.test(a)||(i&&"function"==typeof i&&i.call(r,r),s.resolve(r))),s},jsToNative:function(e){""!=e&&"object"==typeof e&&c(e)},jsToNaClose:function(){c()},jsToNaWeiXin:function(n){""!=n&&"object"==typeof n&&function(n){var t={},i=function(e){var n={},t={appId:y.appId,img:y.img,link:y.link,desc:y.desc,title:y.title,friendesc:y.friendesc};"object"!=typeof e&&(e=t);for(k in t)n[k]=e[k]||t[k];return n};switch(n.optionType){case 1:t.isShow=n.isShow,t.optionType=1,t.btnText=n.btnText||y.btnTextS,t.shareDate=i(n.shareDate),n.shareDate.type&&(t.shareDate.type=n.shareDate.type);break;case 2:t.isShow=n.isShow,t.optionType=2,t.btnText=n.btnText||y.btnTextJ,t.jumpLiDate=n.jumpLiDate;break;case 3:t.isShow=n.isShow,t.optionType=3,t.btnText=n.btnText||y.btnTextN,t.jumpNaDate=n.jumpNaDate;break;case 4:t.isShow=n.isShow,t.optionType=4,t.btnText=n.btnText||y.btnTextN,t.showData=n.showData;break;default:t.isShow=n.isShow,t.optionType=1,t.btnText=n.btnText,t.shareDate=i(n.shareDate),n.shareDate.type&&(t.shareDate.type=n.shareDate.type)}o.test(a)?p&&p(t):e.jd.sendWeiXinCot(r(t))}(n)},jsToComment:function(){o.test(a)?f&&f():e.jd.goToComment()},jsToNaMsg:function(){return function(){var e=a.toLowerCase(),n={},t=/jdjr-app/.test(e);return n.isOur=t,t&&(n.isIos=/clienttype=ios/.test(e),n.isAnd=/jdjr-app-android/.test(e)),n}()},jsToGetResp:function(n,i){t=n,""!==i&&"object"==typeof i&&function(n){o.test(a)?u&&u(n):e.jd.getResponse(r(n))}(i)},jdPay:function(n,i){t=n,""!==i&&"object"==typeof i&&function(n){o.test(a)?iosJDPaySDK&&iosJDPaySDK(n):e.jd.JDPaySDK(r(n))}(i)},jsSendRecord:function(n){""!=n&&"object"==typeof n&&function(n){o.test(a)?l&&l(n):e.jd.sendRecord(r(n))}(n)},jsOpenWeb:function(n){""!=n&&"object"==typeof n&&function(n){if(o.test(a))iosWebExtend&&iosWebExtend(n);else{var t={};t.forward=n,t.isclose=n.isclose,t.isShowTitle=n.isShowTitle,"object"==typeof t?e.jd.closeWebViewExtend(r(t)):e.jd.closeWebViewExtend(t)}}(n)}}}()});var t=jsBridgeV3.onReady(),a=e.navigator.userAgent;window.JDPaySDK={sendPayResult:function(e){alert("sendPayResult:--\x3e"+JSON.stringify(e)),e.code?(e.message||(e.message=""),e.data||(e.data=""),o.isIOS?window.location.href="native://sendPayResult?code="+e.code+"&message="+e.message+"&data="+e.data:JDPaySdk.sendPayResult(e.code,e.message,e.data)):console.log("res is null")},close:function(e){e||(e={}),e.type||(e.type=1),o.isIOS?window.location.href="native://closeWebView?type="+e.type:JDPaySdk.close(e.type)},isAppVersionAfter:function(e,t,a){return n(e,t,a)},pay:function(i,s){if(i)if("function"==typeof s)if(i.appId)if(i.payParam)if(i.type)if(i.bizParam||(i.bizParam=""),e.jdPaySuccessResponseFun=function(e){setTimeout(function(){"object"!=typeof e&&(e=JSON.parse(e)),s(e)},0)},o&&"jdjr"===o.jdPayChannel)if(-1!=a.indexOf("*#@jdPaySDK*#@")){if("3.9.0"==function(){var e={};return a.split("&").forEach(function(n){if("string"==typeof n&&n){var t=n.split("=");t&&t.length>1&&t[0]&&t[1]&&(e[t[0]]=t[1])}}),e.clientVersion||e.version}()&&!o.isIOS)return void s({payStatus:"JDP_PAY_FAIL"});t.then(function(e){e.jdPay(jdPaySuccessResponseFun,i)})}else s({payStatus:"JDP_PAY_FAIL"});else{if(!n(5,4,0))return void s({payStatus:"JDP_PAY_FAIL"});if(o.isIOS){if("3"==i.type)return void(window.location.href="native://frontPay?type="+i.type+"&appId="+i.appId+"&payParam="+i.payParam+"&bizParam="+i.bizParam+"&topChannelId="+i.topChannelId+"&callback=jdPaySuccessResponseFun");if("2"==i.type)return void(window.location.href="native://frontPayChannel?type="+i.type+"&appId="+i.appId+"&payParam="+i.payParam+"&bizParam="+i.bizParam+"&topChannelId="+i.topChannelId+"&callback=jdPaySuccessResponseFun");window.location.href="native://pay?type="+i.type+"&appId="+i.appId+"&payParam="+i.payParam+"&bizParam="+i.bizParam+"&callback=jdPaySuccessResponseFun"}else{if("2"==i.type)return void JDPaySdk.front(i.type,i.appId,i.payParam,i.bizParam,"jdPaySuccessResponseFun");JDPaySdk.pay(i.type,i.appId,i.payParam,i.bizParam,"jdPaySuccessResponseFun")}}else console.log("not found type");else console.log("not found payParam");else console.log("not found appId");else console.log("fn is not a function");else console.log("not found data")},jdPay:function(e){if("thirdPay"!=e.type||n(6,2,0))if(window._callBackFun=function(n){setTimeout(function(){if("object"!=typeof n)return"string"==typeof n&&(n=n.replace('"{',"{").replace('}"',"}").replace(/\s/g,"")),void e.success(JSON.parse(n));e.success(n)},1)},o.isIOS)window.location.href="native://jdPay?type="+e.type+"&param="+JSON.stringify(e.param)+"&returnType="+e.returnType+"&callback=_callBackFun";else{var t={type:e.type,param:JSON.stringify(e.param),returnType:e.returnType,callback:"_callBackFun"};JDPaySdk.jdPay(JSON.stringify(t))}else this.thirdPay(e.param)},thirdPay:function(e){o.isIOS?window.location.href="native://thirdPay?orderId="+e.orderId+"&merchant="+e.merchant+"&sessionKey="+e.sessionKey+"&signData="+e.signData:JDPaySdk.thirdPay(JSON.stringify(e))},account:function(n,t){n?n.type?n.accountParam?n.bizId?(t||(t=function(){}),e.jdPayAccountCallBack=function(e){setTimeout(function(){t(e)},0)},/ipad/.test(a.toLowerCase())?e.jdPayAccountCallBack('{"queryStatus": "JDP_QUERY_FAIL"}'):o.isIOS?window.location.href="native://account?type="+n.type+"&accountParam="+n.accountParam+"&bizId="+n.bizId+"&callback=jdPayAccountCallBack":JDPaySdk.account(n.type,n.accountParam,n.bizId,"jdPayAccountCallBack")):console.log("not found bizId"):console.log("not found accountParam"):console.log("not found type"):console.log("not found data")},getInfo:function(){/(iPhone|iPad|iPod)/i.test(a)?o.isIOS=!0:o.isIOS=!1,-1!=a.indexOf("jdapp")?(o.jdPayChannel="jdapp",o.appId="jdapp"):(o.jdPayChannel="jdjr",o.appId="jdjr");var e=a.toLocaleLowerCase();if(null!=e&&-1!=e.indexOf("jdapp")&&(-1!=e.indexOf("jdapp;android;")?o.appVersion=e.substring(e.indexOf("jdapp;android;")+14,e.indexOf("jdapp;android;")+19):o.appVersion=e.substring(e.indexOf("jdapp;iphone;")+13,e.indexOf("jdapp;iphone;")+18)),null!=e&&-1!=e.indexOf("jdjr")&&(o.appVersion=e.substring(e.indexOf("version=")+8,e.indexOf("version=")+13)),-1!=a.indexOf("*#@jdPaySDK*#@"))for(var n=a.substring(a.indexOf("*#@jdPaySDK*#@")+14,a.lastIndexOf("*#@jdPaySDK*#@")).split("&"),t=0;t<n.length;t++){var i=n[t].split("=");i[1]&&(o[i[0]]=i[1].toLocaleLowerCase())}return o},getSDKVersion:function(e){e||(e=function(){}),callBackFn=function(n){setTimeout(function(){!n instanceof Object&&(n=JSON.parse(n)),e(n)},0)},o.isIOS?window.location.href="native://getSDKInfo?callback=callBackFn":JDPaySdk.getSDKInfo("callBackFn")},jsToNative:function(e){o&&"jdjr"===o.jdPayChannel&&t.then(function(n){n.jsToNative(e)})}};var o={};JDPaySDK.info=JDPaySDK.getInfo()}("undefined"!=typeof window?window:this);